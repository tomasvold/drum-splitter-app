<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Drum Stem Separator</title>
  <meta name="robots" content="noindex, nofollow">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <img src="{{ url_for('static', filename='Logo.png') }}" alt="Drum Splitter Logo" class="logo">
  <p>Upload your stereo drum track and let our AI split it into individual stems (kick, snare, toms, cymbals, hihat)</p>
  <form id="uploadForm" action="/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="audio" required>
    <br>
    <button type="submit">Upload and Split</button>
  </form>

  <div class="spinner" id="spinner"></div>
  <div class="message" id="message">⏳ Please select a drum track to upload..</div>

  <script>
    const form = document.getElementById('uploadForm');
    const spinner = document.getElementById('spinner');
    const message = document.getElementById('message');
    let phase = 0;

    const messages = ['Uploading...', 'Processing...', 'Almost done...'];

    form.addEventListener('submit', (e) => {
      // Show spinner and initial message
      spinner.style.display = 'block';
      message.style.display = 'block';
      message.innerText = messages[phase];  // Show "Uploading..."

      // Update message every 2.5 seconds during processing
      const interval = setInterval(() => {
        phase = (phase + 1) % messages.length;
        message.innerText = messages[phase];
      }, 2500);

      // Stop the interval after form submission completes (handled by Flask)
      form.addEventListener('load', () => clearInterval(interval));
    });
  </script>

<footer>
  <p>
    Created by Tom Åsvold 2025, Los Angeles CA</br>
    <span class="social-links">
      <a href="https://www.instagram.com/tomasvold" target="_blank">Instagram</a> | 
      <a href="https://www.facebook.com/tomasvold" target="_blank">Facebook</a> | 
      <a href="https://www.linkedin.com/in/tomasvold" target="_blank">LinkedIn</a>
    </span>
  </p>
</footer>

</body>
</html>
